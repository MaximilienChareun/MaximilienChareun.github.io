<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MyFlix - Netflix Privé</title>
    <style>
        :root {
            --red: #e50914;
            --black: #141414;
            --dark: #221f1f;
            --gray: #808080;
        }
        * { margin:0; padding:0; box-sizing:border-box; }
        body { font-family:'Helvetica Neue',Arial,sans-serif; background:var(--black); color:white; overflow-x:hidden; }

        header {
            position:fixed; top:0; left:0; right:0; padding:20px 4%; 
            background:linear-gradient(to bottom,rgba(0,0,0,.9),transparent);
            display:flex; align-items:center; z-index:1000; transition:.4s;
        }
        header.scrolled { background:var(--black); box-shadow:0 4px 20px rgba(0,0,0,.8); }

        .logo { font-size:2.5rem; font-weight:900; color:var(--red); text-decoration:none; }
        nav a { color:white; margin:0 18px; text-decoration:none; font-weight:500; }
        nav a:hover { color:var(--red); }

        .header-right { margin-left:auto; display:flex; align-items:center; gap:25px; }
        .search { padding:10px; background:rgba(0,0,0,.6); border:1px solid #555; border-radius:6px; color:white; width:260px; }

        .profile-menu { position:relative; }
        .profile-btn { width:40px; height:40px; background:var(--red); border-radius:6px; display:grid; place-items:center; font-weight:bold; cursor:pointer; }
        .dropdown { position:absolute; top:55px; right:0; background:#1f1b1b; min-width:200px; border-radius:8px; box-shadow:0 8px 30px rgba(0,0,0,.6); padding:15px 0; display:none; }
        .dropdown a { padding:12px 20px; color:white; text-decoration:none; display:block; }
        .dropdown a:hover { background:rgba(255,255,255,.1); }

        /* HERO */
        .hero { height:90vh; position:relative; background:linear-gradient(to right,rgba(0,0,0,.85),rgba(0,0,0,.3) 70%), url('test_miniature.jpg') center/cover; }
        .hero video { position:absolute; top:0; left:0; width:100%; height:100%; object-fit:cover; opacity:.4; }
        .hero-content { margin-left:5%; max-width:600px; position:relative; z-index:2; padding-top:20vh; }
        .hero-content h1 { font-size:4.8rem; margin-bottom:20px; }
        .hero-content p { font-size:1.4rem; margin-bottom:35px; line-height:1.6; }
        .hero-buttons { display:flex; align-items:center; gap:20px; }
        .btn { padding:14px 34px; border:none; border-radius:6px; font-size:1.2rem; font-weight:bold; cursor:pointer; transition:.3s; display:flex; align-items:center; gap:12px; }
        .btn-play { background:white; color:black; }
        .btn-play:hover { background:#e5e5e5; }
        .btn-list { background:rgba(109,109,110,.7); color:white; }
        .btn-list.active { background:var(--red); }
        .btn-list:hover { background:rgba(109,109,110,1); }

        /* ROW */
        .section-title { margin:60px 0 20px 5%; font-size:1.9rem; }
        .row { display:flex; overflow-x:auto; padding:0 5% 40px; gap:15px; scroll-behavior:smooth; }
        .row::-webkit-scrollbar { display:none; }

        .card { flex:0 0 260px; background:var(--dark); border-radius:12px; overflow:hidden; cursor:pointer; transition:transform .4s; }
        .card:hover { transform:scale(1.1); }
        .card img { width:100%; height:146px; object-fit:cover; }
        .card-info { padding:14px; }
        .card-info h3 { font-size:1.15rem; margin-bottom:6px; }
        .duration { color:var(--gray); font-size:.95rem; margin-bottom:8px; }
        .desc { font-size:.9rem; color:#ccc; line-height:1.4; }

        /* MODALE — CORRIGÉE À 100% */
        .modal {
            position:fixed;
            inset:0;
            background:rgba(0,0,0,.95);
            z-index:2000;
            display:none;                     /* caché par défaut */
            align-items:center;
            justify-content:center;
        }
        .modal.active { display:flex !important; }  /* on l’active seulement en JS */

        .modal-content { background:#181414; width:90%; max-width:950px; border-radius:16px; overflow:hidden; position:relative; }
        .modal-img { width:100%; height:450px; object-fit:cover; }
        .modal-body { padding:40px; }
        .modal-title { font-size:3rem; margin-bottom:20px; }
        .modal-desc { font-size:1.3rem; line-height:1.7; margin-bottom:40px; }
        .modal-play { background:var(--red); color:white; padding:18px 60px; font-size:1.5rem; border:none; border-radius:8px; cursor:pointer; }
        .close { position:absolute; top:25px; right:35px; font-size:4rem; cursor:pointer; opacity:.8; }
        .close:hover { opacity:1; }

        footer { text-align:center; padding:60px; color:#555; }
    </style>
</head>
<body>

    <header id="header">
        <a href="#" class="logo">MyFlix</a>
        <nav>
            <a href="#">Accueil</a>
            <a href="#">Films</a>
            <a href="#">Séries</a>
            <a href="#">Ma liste</a>
        </nav>
        <div class="header-right">
            <input type="text" class="search" placeholder="Rechercher...">
            <div class="profile-menu">
                <div class="profile-btn" onclick="document.getElementById('dropdown').classList.toggle('block')">U</div>
                <div class="dropdown" id="dropdown">
                    <a href="#">Profil</a>
                    <a href="#">Paramètres</a>
                    <a href="#">Aide</a>
                    <a href="#">Déconnexion</a>
                </div>
            </div>
        </div>
    </header>

    <!-- HERO -->
    <section class="hero">
        <video autoplay muted loop>
            <source src="test.mp4" type="video/mp4">
        </video>
        <div class="hero-content">
            <h1>Mon Film Principal</h1>
            <p>Une œuvre personnelle réalisée avec passion. Qualité maximale, zéro pub, 100 % plaisir.</p>
            <div class="hero-buttons">
                <button class="btn btn-play" onclick="window.location='player.html'">
                    Play
                    Play
                </button>
                <button class="btn btn-list" id="mainListBtn" onclick="this.classList.toggle('active'); this.innerHTML = this.classList.contains('active') ? 'Ajoutée' : '+ Ma liste';">
                    + Ma liste
                </button>
            </div>
        </div>
    </section>

    <!-- MES AUTRES VIDÉOS -->
    <h2 class="section-title">Mes autres vidéos</h2>
    <div class="row" id="moviesRow">
        <div class="card" data-video="test.mp4" data-poster="test_miniature.jpg"
             data-title="Mon Court-Métrage" data-desc="Court-métrage réalisé entre amis en une journée.">
            <img src="test_miniature.jpg" alt="">
            <div class="card-info">
                <h3>Mon Court-Métrage</h3>
                <div class="duration"><span class="dur-text">Calcul en cours…</span></div>
                <div class="desc">Court-métrage réalisé entre amis en une journée.</div>
            </div>
        </div>

        <!-- Ajoute tes autres vidéos ici (même structure) -->
    </div>

    <!-- MODALE (cachée au chargement) -->
    <div class="modal" id="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal()">×</span>
            <img id="modalImg" class="modal-img" src="" alt="">
            <div class="modal-body">
                <h2 id="modalTitle" class="modal-title"></h2>
                <p id="modalDesc" class="modal-desc"></p>
                <button class="modal-play" onclick="playSelectedVideo()">Play</button>
            </div>
        </div>
    </div>

    <footer>MyFlix Privé © 2025 — Ton cinéma, tes règles</footer>

    <script>
        // Header scroll
        window.addEventListener('scroll', () => {
            document.getElementById('header').classList.toggle('scrolled', window.scrollY > 80);
        });

        // Calcul durée réelle des vidéos
        document.querySelectorAll('.card').forEach(card => {
            const video = document.createElement('video');
            video.src = card.dataset.video;
            video.preload = 'metadata';
            video.onloadedmetadata = () => {
                const m = Math.floor(video.duration / 60);
                const s = Math.floor(video.duration % 60).toString().padStart(2, '0');
                card.querySelector('.dur-text').textContent = `${m}:${s}`;
            };
        });

        // Ouvrir la modale
        document.querySelectorAll('.card').forEach(card => {
            card.onclick = function(e) {
                e.stopPropagation();
                document.getElementById('modalImg').src = this.dataset.poster;
                document.getElementById('modalTitle').textContent = this.dataset.title;
                document.getElementById('modalDesc').textContent = this.dataset.desc;
                window.currentVideoToPlay = this.dataset.video;
                document.getElementById('modal').classList.add('active');
                document.body.style.overflow = 'hidden';
            };
        });

        // Fermer la modale
        function closeModal() {
            document.getElementById('modal').classList.remove('active');
            document.body.style.overflow = 'auto';
        }

        // Play depuis la modale
        function playSelectedVideo() {
            window.location.href = `player.html?video=${encodeURIComponent(window.currentVideoToPlay)}`;
        }

        // Échap = fermer
        document.addEventListener('keydown', e => { if (e.key === "Escape") closeModal(); });
    </script>
</body>
</html>